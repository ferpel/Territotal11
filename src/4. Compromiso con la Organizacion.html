<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Escala Likert - Compromiso con la Organización</title>
  <style>
    body { 
      font-family: Arial, sans-serif; 
      margin: 20px; 
      line-height: 1.6; 
      background: #f9f9f9; 
      text-align: center;
    }
    h1 { margin-bottom: 10px; }
    .instructions { 
      background: #eef; 
      padding: 10px; 
      border-radius: 8px; 
      margin: 0 auto 20px auto; 
      display: inline-block; 
      text-align: left;
    }
    .question { 
      margin: 15px auto; 
      background: #fff; 
      padding: 15px; 
      border-radius: 8px; 
      box-shadow: 0 1px 3px rgba(0,0,0,0.1); 
      width: 80%;
      text-align: center;
    }
    .question span.num { font-weight: bold; margin-right: 5px; }
    .options { margin-top: 10px; }
    .options label { display: inline-block; margin: 5px 15px; }
    button { margin: 10px 5px; padding: 10px 15px; border: none; border-radius: 8px; cursor: pointer; }
    button:first-of-type { background: #4CAF50; color: white; }
    button:last-of-type { background: #f44336; color: white; }
    .result { 
      margin: 20px auto; 
      padding: 15px; 
      background: #fff; 
      border-radius: 8px; 
      box-shadow: 0 1px 3px rgba(0,0,0,0.1); 
      width: 60%; 
    }
  </style>
</head>
<body>
  <h1>Escala Likert - Compromiso con la Organización</h1>
  <div class="instructions">
    <p><strong>Instrucciones:</strong> Seleccione la opción que mejor refleje su grado de acuerdo con cada afirmación:</p>
    <ul>
      <li>A. Totalmente en desacuerdo</li>
      <li>B. En desacuerdo</li>
      <li>C. Ni de acuerdo, ni en desacuerdo</li>
      <li>D. De acuerdo</li>
      <li>E. Totalmente de acuerdo</li>
    </ul>
  </div>

  <form id="likertForm"></form>

  <button type="button" onclick="calcularResultado()">Calcular resultado</button>
  <button type="button" onclick="reiniciar()">Reiniciar</button>

  <div id="resultado" class="result"></div>

  <script>
    let preguntas = [
      "Promuevo las metas de la organización y respeto sus normas.",
      "Antepongo las necesidades de la organización a las mías.",
      "Apoyo a la organización en situaciones difíciles.",
      "Demuestro sentido de pertenencia en mis actuaciones.",
      "Colaboro con mis compañeros y otras áreas cuando se requiere.",
      "Ignoro las normas de la organización cuando no me convienen.", 
      "Me esfuerzo por representar adecuadamente a la organización.",
      "Busco soluciones que beneficien a la organización antes que mis intereses.",
      "Participo activamente en iniciativas institucionales.",
      "Evito colaborar con mis compañeros aunque lo necesiten.", 
      "Cumplo con responsabilidad mis deberes hacia la organización.",
      "Expreso orgullo de pertenecer a mi organización.",
      "Me desentiendo cuando la organización enfrenta dificultades.", 
      "Promuevo el respeto por la misión y visión institucional.",
      "Participo en actividades que fortalecen la cultura organizacional.",
      "Prefiero cumplir solo con lo mínimo en mis tareas.", 
      "Defiendo los intereses de la organización frente a terceros.",
      "Fomento la cooperación entre diferentes áreas.",
      "Ignoro los valores institucionales en mi trabajo diario.", 
      "Hablo positivamente de la organización en distintos espacios.",
      "Participo en actividades que promueven el sentido de pertenencia.",
      "Evito anteponer los intereses de la organización a los míos.", 
      "Estoy comprometido con los objetivos estratégicos institucionales.",
      "Colaboro activamente en situaciones de crisis.",
      "Dejo de lado los compromisos organizacionales cuando me incomodan.", 
      "Respeto y promuevo las políticas internas de la organización.",
      "Soy leal a la misión y visión institucional.",
      "Eludo las responsabilidades cuando afectan mis intereses.", 
      "Busco generar confianza en la organización con mis acciones.",
      "Valoro los logros organizacionales como propios."
    ];

    // Índices de preguntas inversas (empezando en 1)
    let inversas = [6, 10, 13, 16, 19, 22, 25, 28];

    const opcionesLetras = ["A", "B", "C", "D", "E"];

    function generarFormulario() {
      const form = document.getElementById("likertForm");
      form.innerHTML = "";
      preguntas.forEach((texto, i) => {
        const div = document.createElement("div");
        div.className = "question";
        const label = document.createElement("label");
        label.innerHTML = `<span class="num">${i + 1}.</span> ${texto}`;
        div.appendChild(label);

        const opcionesDiv = document.createElement("div");
        opcionesDiv.className = "options";
        for (let j = 1; j <= 5; j++) {
          const input = document.createElement("input");
          input.type = "radio";
          input.name = "q" + (i + 1);
          input.value = j;
          const optLabel = document.createElement("label");
          optLabel.appendChild(input);
          optLabel.appendChild(document.createTextNode(" " + opcionesLetras[j - 1]));
          opcionesDiv.appendChild(optLabel);
        }
        div.appendChild(opcionesDiv);
        form.appendChild(div);
      });
    }

    function calcularResultado() {
      let total = 0, contestadas = 0, malas = [];
      let sinResponder = [];

      preguntas.forEach((_, i) => {
        const opciones = document.getElementsByName("q" + (i + 1));
        let valor = null;
        for (let op of opciones) if (op.checked) valor = parseInt(op.value);

        if (valor === null) {
          sinResponder.push(i + 1);
        } else {
          contestadas++;
          if (inversas.includes(i + 1)) valor = 6 - valor;
          total += valor;
          if (valor <= 2) malas.push(i + 1);
        }
      });

      if (sinResponder.length > 0) {
        alert("Debe responder todas las preguntas. Faltan: " + sinResponder.join(", "));
        return;
      }

      const promedio = (total / contestadas).toFixed(2);
      let nivel = "";
      if (promedio >= 4.5) nivel = "Muy alto";
      else if (promedio >= 3.5) nivel = "Alto";
      else if (promedio >= 2.5) nivel = "Medio";
      else if (promedio >= 1.5) nivel = "Bajo";
      else nivel = "Muy bajo";

      document.getElementById("resultado").innerHTML =
        `<p><strong>Puntaje total:</strong> ${total}</p>
         <p><strong>Promedio:</strong> ${promedio}</p>
         <p><strong>Nivel:</strong> ${nivel}</p>
         <p><strong>Preguntas con baja puntuación:</strong> ${malas.join(", ") || "Ninguna"}</p>`;
    }

    function reiniciar() {
      // Barajar preguntas
      for (let i = preguntas.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [preguntas[i], preguntas[j]] = [preguntas[j], preguntas[i]];
      }
      generarFormulario();
      document.getElementById("resultado").innerHTML = "";
    }

    // Inicial
    generarFormulario();
  </script>
</body>
</html>
