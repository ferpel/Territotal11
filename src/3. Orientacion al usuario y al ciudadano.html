<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Escala Likert - Orientación al Usuario y al Ciudadano</title>
  <style>
    body { 
      font-family: Arial, sans-serif; 
      margin: 20px; 
      line-height: 1.6; 
      background: #f9f9f9; 
      text-align: center;
    }
    h1 { margin-bottom: 10px; }
    .instructions { 
      background: #eef; 
      padding: 10px; 
      border-radius: 8px; 
      margin: 0 auto 20px auto; 
      display: inline-block; 
      text-align: left;
    }
    .question { 
      margin: 15px auto; 
      background: #fff; 
      padding: 15px; 
      border-radius: 8px; 
      box-shadow: 0 1px 3px rgba(0,0,0,0.1); 
      width: 80%;
      text-align: center;
    }
    .question span.num { font-weight: bold; margin-right: 5px; }
    .options { margin-top: 10px; }
    .options label { display: inline-block; margin: 5px 15px; }
    button { margin: 10px 5px; padding: 10px 15px; border: none; border-radius: 8px; cursor: pointer; }
    button:first-of-type { background: #4CAF50; color: white; }
    button:last-of-type { background: #f44336; color: white; }
    .result { 
      margin: 20px auto; 
      padding: 15px; 
      background: #fff; 
      border-radius: 8px; 
      box-shadow: 0 1px 3px rgba(0,0,0,0.1); 
      width: 60%; 
    }
  </style>
</head>
<body>
  <h1>Escala Likert - Orientación al Usuario y al Ciudadano</h1>
  <div class="instructions">
    <p><strong>Instrucciones:</strong> Seleccione la opción que mejor refleje su grado de acuerdo con cada afirmación:</p>
    <ul>
      <li>A. Totalmente en desacuerdo</li>
      <li>B. En desacuerdo</li>
      <li>C. Ni de acuerdo, ni en desacuerdo</li>
      <li>D. De acuerdo</li>
      <li>E. Totalmente de acuerdo</li>
    </ul>
  </div>

  <form id="likertForm"></form>

  <button type="button" onclick="calcularResultado()">Calcular resultado</button>
  <button type="button" onclick="reiniciar()">Reiniciar</button>

  <div id="resultado" class="result"></div>

  <script>
    let preguntas = [
      "Valoro y atiendo las necesidades de los usuarios de forma oportuna.",
      "Escucho activamente a los ciudadanos cuando expresan sus inquietudes.",
      "Incorporo las necesidades de los usuarios en los proyectos institucionales.",
      "Aplico siempre los conceptos de no estigmatización y no discriminación.",
      "Informo con veracidad al usuario o ciudadano.",
      "Ignoro las peticiones de los ciudadanos cuando no coinciden con mis intereses.", 
      "Reconozco la interdependencia entre mi trabajo y el de otros.",
      "Establezco mecanismos para conocer las necesidades de los usuarios.",
      "Genero espacios incluyentes y utilizo lenguaje respetuoso.",
      "No me esfuerzo en dar información clara a los usuarios.", 
      "Valoro las sugerencias de los ciudadanos para mejorar los servicios.",
      "Tiendo a discriminar a ciertos usuarios o ciudadanos.", 
      "Atiendo con prontitud las solicitudes que recibe mi área de trabajo.",
      "Fomento un trato digno y respetuoso hacia todos los usuarios.",
      "No me interesa conocer las necesidades reales de los ciudadanos.", 
      "Respondo con responsabilidad y calidad a las inquietudes de los usuarios.",
      "Incluyo la visión de servicio en el corto, mediano y largo plazo.",
      "Evito incorporar las necesidades de los usuarios en los proyectos.",
      "Promuevo la participación de los ciudadanos en la gestión institucional.",
      "Me esfuerzo por garantizar igualdad de trato a todos los usuarios.",
      "No tomo en cuenta la diversidad cultural o social de los usuarios.", 
      "Atiendo las necesidades de los usuarios internos de la entidad.",
      "Trabajo en equipo para mejorar la atención al ciudadano.",
      "No considero importante dar un buen servicio al ciudadano.", 
      "Utilizo mecanismos de evaluación para conocer la satisfacción de los usuarios.",
      "Me esfuerzo por ofrecer soluciones oportunas a los ciudadanos.",
      "Ignoro las quejas y reclamos de los usuarios.", 
      "Promuevo el respeto y la empatía en la atención al ciudadano.",
      "Incorporo los aportes de los ciudadanos para fortalecer los proyectos institucionales.",
      "Desconozco la importancia de la orientación al usuario y al ciudadano." 
    ];

    // Índices de preguntas inversas (empezando en 1 según el orden de arriba)
    let inversas = [6, 10, 12, 15, 18, 21, 24, 27, 30];

    const opcionesLetras = ["A", "B", "C", "D", "E"];

    function generarFormulario() {
      const form = document.getElementById("likertForm");
      form.innerHTML = "";
      preguntas.forEach((texto, i) => {
        const div = document.createElement("div");
        div.className = "question";
        const label = document.createElement("label");
        label.innerHTML = `<span class="num">${i + 1}.</span> ${texto}`;
        div.appendChild(label);

        const opcionesDiv = document.createElement("div");
        opcionesDiv.className = "options";
        for (let j = 1; j <= 5; j++) {
          const input = document.createElement("input");
          input.type = "radio";
          input.name = "q" + (i + 1);
          input.value = j;
          const optLabel = document.createElement("label");
          optLabel.appendChild(input);
          optLabel.appendChild(document.createTextNode(" " + opcionesLetras[j - 1]));
          opcionesDiv.appendChild(optLabel);
        }
        div.appendChild(opcionesDiv);
        form.appendChild(div);
      });
    }

    function calcularResultado() {
      let total = 0, contestadas = 0, malas = [];
      let sinResponder = [];

      preguntas.forEach((_, i) => {
        const opciones = document.getElementsByName("q" + (i + 1));
        let valor = null;
        for (let op of opciones) if (op.checked) valor = parseInt(op.value);

        if (valor === null) {
          sinResponder.push(i + 1);
        } else {
          contestadas++;
          if (inversas.includes(i + 1)) valor = 6 - valor;
          total += valor;
          if (valor <= 2) malas.push(i + 1);
        }
      });

      if (sinResponder.length > 0) {
        alert("Debe responder todas las preguntas. Faltan: " + sinResponder.join(", "));
        return;
      }

      const promedio = (total / contestadas).toFixed(2);
      let nivel = "";
      if (promedio >= 4.5) nivel = "Muy alto";
      else if (promedio >= 3.5) nivel = "Alto";
      else if (promedio >= 2.5) nivel = "Medio";
      else if (promedio >= 1.5) nivel = "Bajo";
      else nivel = "Muy bajo";

      document.getElementById("resultado").innerHTML =
        `<p><strong>Puntaje total:</strong> ${total}</p>
         <p><strong>Promedio:</strong> ${promedio}</p>
         <p><strong>Nivel:</strong> ${nivel}</p>
         <p><strong>Preguntas con baja puntuación:</strong> ${malas.join(", ") || "Ninguna"}</p>`;
    }

    function reiniciar() {
      // Barajar preguntas
      for (let i = preguntas.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [preguntas[i], preguntas[j]] = [preguntas[j], preguntas[i]];
      }
      generarFormulario();
      document.getElementById("resultado").innerHTML = "";
    }

    // Inicial
    generarFormulario();
  </script>
</body>
</html>
